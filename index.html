<!doctype html>
<html lang=en>

<head>
    <meta charset=utf-8>
    <meta content="width=device-width,initial-scale=1" name=viewport>
    <link rel="icon" href="img/logo.webp" type="image/x-icon">
    <meta content=#f9c412 name=theme-color>
    <meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots>
    <meta name="google-site-verification" content="ILDMeZ353UxbRPeQ77bJ5-1s0x8vh-bycFyg6zErE0M" />
    <title>Royal Coastal Builders</title>

       
    <link href=/ rel=preconnect crossorigin>
    <script csp-hash>if (/Mac OS X/.test(navigator.userAgent)) document.documentElement.classList.add('apple')</script>
    
    
</head>

<body>
    
    <header>
        <h1 id="message">Royal Coastal Builders</h2>
    </header>
    <div id="DeviceManagerRoot"></div>
    <div id="_FFFFFFFFFFFFFF00001653153259024829_"></div>
    <div id="_FFFFFFFFFFFFFF00001651912466881253_"></div>
    <div id="OxyegnLandingPage"></div>

    <iframe title="site loader" id="iframe-handle" width="100%"
        style="position: absolute; top: 0; left: 0; height: 100vh; background: white;padding: 0; margin: 0;border: none;z-index: 99; cursor: progress;"
        frameborder="0" src="green_zone.html" scrolling="no"></iframe>
    <iframe title="site loader" id="iframe-handle-full" width="100%" height="100%"
        style="position: absolute; top: 0; left: 0; background: white;padding: 0; margin: 0;border: none;"
        frameborder="0" src="" loading="lazy"></iframe>


    <script>
        var all_scripts = [
            {
                "url": "/CommunicationClient/Libs/Janus/janus.js",
                "type": "text/javascript"
            },
            {
                "url": "/CommunicationClient/dist/CommWidget.min.js",
                "type": "text/javascript"
            },
        ]
    </script>
    <script
        src="/pages/as/_FFFFFFFFFFFFFF00001674557629264571_/at/_FFFFFFFFFFFFFF00001674557629264571_/js/simplialib.js"
        async onload="loadSimpliaLib()"></script>
    <script>

       
        var header = document.getElementById("message");
        var iframe = document.getElementById("iframe-handle");
        
        function iframeFadin(iframe) {
            let i = 100;
            let interval = setInterval(() => {
                i--;
                iframe.style.opacity = i / 100;
                if (i === 0) {
                    clearInterval(interval);
                    iframe.style.zIndex = -1
                    iframe.style.display = 'none'
                    iframe.src = ''
                }
            }, 5)
        }
        function modifyIframeHead() {
            var iframe = document.getElementById('iframe-handle-full');

            // Check if the iframe contentDocument is available
            if (iframe.contentDocument) {
                var iframeHead = iframe.contentDocument.head;
                document.head.innerHTML = iframeHead.innerHTML;
                console.log("IframeHead",iframeHead);
            }
        }
        function loadSimpliaLib() {
            if (iframe) {
                function loadIframe(e) {
                    let iframeF = document.getElementById("iframe-handle-full");
                   
                    iframeF.src = "full_page.html";
                    iframeF.loading = 'lazy';
                    iframeF.addEventListener('load', modifyIframeHead);
                    // iframeF.style.zIndex = "100";
                    // iframeF.contentWindow.addEventListener('DOMContentLoaded', () => handlePageChange(iframeF));
                    activate(e);
                    setTimeout(() => {
                        iframeFadin(iframe)
                    }, 3000);
                }
                iframe.contentWindow.addEventListener('touchstart', loadIframe, { once: true, passive: true })
                iframe.contentWindow.addEventListener('mousemove', loadIframe, { once: true, passive: true })
                iframe.contentWindow.addEventListener('mousedown', loadIframe, { once: true, passive: true })
                // iframe.contentWindow.addEventListener('wheel', loadIframe, { once: true, passive: true })
                iframe.contentWindow.addEventListener('click', loadIframe, { once: true, passive: true })

            }
        }
    </script>
    <script>
        const otherWorker = new Worker("./assets/worker.js", { type: "module" });
        otherWorker.postMessage("Hello from the main thread!");
        otherWorker.onmessage = (e) => {
            console.log('otherWorker called', e.data)
            if (e.data.type == 'load') {
                var iframeF = document.getElementById("iframe-handle-full");
                if (!iframeF.src.includes('full_page.html')) {
                    iframeF.src = "full_page.html";
                    iframeF.addEventListener('load', modifyIframeHead);
                }
            }
            if (e.data.type == 'hide') {
                activate(e)
                var iframe = document.getElementById("iframe-handle");

                iframeFadin(iframe)
            }
        };
    </script>
    <style>
      #simplia-red-button {
        display: none;   
      }
      #DeviceManagerRoot .fa-bars {
        display: none;
      }
    </style>
</body>

</html>